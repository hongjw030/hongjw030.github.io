---
title: "자바스크립트의 hoisting, 호이스팅이란?"
mainCategory: "study"
subCategory: "study_cs"
description: "js의 호이스팅에 대해 알아보자!"
coverImg: "/assets/study/cs/2_1.png"
---

## 오늘의 기술면접 질문

####  호이스팅이 뭔지 말해주세요.

완전완전 cs 단골질문 2. cs 면접 100% 질문 받았던 문제.

자바스크립트는 특유의 동작 방식때문에 변수를 정의할 때 `hoisting`이라는 현상이 일어난다. 이번 포스팅에선 hoisting이 뭔지 알아보자.

***

## js의 호이스팅 파헤치기.

### 1. 호이스팅이 뭔데?

![image](/assets/study/cs/2_1.png)

**호이스팅**이란 변수의 정의가 범위에 따라 `변수 선언부`와 `변수 할당부`로 분리되는 것을 의미한다.

예를 들어 변수가 함수 내에 정의되었다면 그 변수의 선언부는 함수의 최상위로 끌어올려지며, 변수가 함수 바깥에서 정의된 경우 전역 컨텍스트의 최상위로 끌어올려진다.

이해가 잘 안 간다면 아래 코드를 보자!

```javascript
// 내가 짠 코드가 이런 모습이라 한다면,

function printX() {
  console.log(x); // undefined
  var x = 100;
  console.log(x); // 100
}
getprintX();
```

```javascript
// 자바스크립트는 내 코드를 아래와 같이 지맘대로 해석한다!
// 그래서 getX 함수를 실행하면 오류가 안 뜨고 undefined, 100이 순서대로 출력된다.

function printX() {
  var x;
  console.log(x); // undefined
  x = 100;
  console.log(x); // 100
}
printX();
```

### 2. 호이스팅이 왜 일어나는가?

자바스크립트 엔진의 동작 원리 때문이다!!

자바스크립트 엔진은 코드를 해석할 때엔 `구문 분석` -> `실행` 이라는 주요 2단계를 거친다. 

1. 구문 분석: js 엔진은 코드를 검색해 변수 및 함수 선언을 식별한다. 그리고 코드를 즉시 실행하는 대신 엔진은 이 선언부를 범위 내 맨 위로 끌어올린다.

2. 실행: 그다음 코드 실행!!!

### 3. 그럼 호이스팅은 var 키워드에서만 일어나는가?

**그건 아니다!!!! let, const 키워드에서도 호이스팅은 발생한다!**

이건 내가 기술면접에서 연계 질문으로 (??: "호이스팅이 뭔가요?" => ??: "아~ 그럼 호이스팅은 var에서만 일어나나요?") 많이 받았던 질문이다. 꼭 기억해두자.

우선 변수는 3단계에 걸쳐 생성된다.

```
1. 선언 Declaration : 변수를 실행 컨텍스트의 변수 객체에 등록하는 과정.

2. 초기화 Initialization : 변수 객체에 등록된 변수들을 위해 메모리에 공간을 확보함. 이 단계에서 변수는 undefined로 초기화됨.

3. 할당 Assignment : undefined로 초기화된 변수에 실제 값을 할당함.
```

이 때 `var` 키워드로 선언된 변수는 선언 단계와 초기화 단계가 거의 한 번에 일어난다. 그래서 코드 상의 변수 선언문 이전에 변수에 접근하려 들어도 에러가 나지 않고 undefined가 출력된다는 것.

그런데 `let` 키워드로 선언된 변수는 선언 단계와 초기화 단계가 분리되어 진행된다. 선언 단계는 `js 엔진이 맨 처음 구문 분석할 때`에 발생하지만, 그다음 초기화 단계는 `js 엔진이 코드를 실행하는 단계` 도중, 변수 선언문에 도달했을 때에 이루어진다. 따라서 코드 상의 변수 선언문 이전에 변수에 접근하려 하면 아직 메모리 공간이 확보되지 않았다는 `reference error` 참조 에러가 발생한다!!

이 참조 에러때문에 let, const는 호이스팅이 일어나지 않는다고 오해할 수 있지만 사실 var이든 let이든 const든간에 변수 선언부는 항상 hoisting된다는 것.

이 때 let, const 키워드로 변수를 선언한 경우 스코프의 시작 지점부터 변수 초기화 시작 지점까지는 변수를 참조할 수 없다 해서 `일시적 사각지대(Temporal Dead Zone, TDZ)` 라고 부른다. 

정리하자면 아래 사진과 같다. 자세한 건 `변수의 lifecycle` 키워드로 검색해보자.

![image](/assets/study/cs/2_3.jpg)


### 4. 다른 프로그래밍 언어에서는 호이스팅 현상이 안 일어나나?

그렇다, 호이스팅은 js의 고유 현상이라고도 할 수 있다... 애초에 자바스크립트 엔진이 스크립트를 해석하는 과정 도중에 생기는 현상이기 때문.


### 5. 호이스팅의 장단점?

호이스팅은 유연한 코드 구성을 할 수 있게 해주지만, 로직 흐름을 방해하고 코드를 읽기 불편하게 만든다. 득보단 실이 많아 호이스팅을 가시적으로 일으키는 `var` 키워드보단 `let`, `const` 키워드를 지향한다.

***

## 총정리

#### Q. 호이스팅 현상에 대해 설명해주세요.

A.
호이스팅이란 변수 및 함수의 선언부와 할당부가 분리되어, 선언부는 스코프 내 최상단으로 끌어올려지는 현상을 말합니다.

이는 변수가 생성될 때 선언, 초기화, 할당 단계에서 선언 단계가 있는데, 코드가 실행되기도 전 컴파일 단계에서 변수 선언이 범위의 맨 위로 끌어올려지기 때문에 발생합니다.

호이스팅은 var, let, const 변수 어디서든 일어나는 자바스크립트의 특징이지만, 변수의 선언과 초기화 부분이 한 번에 일어나는 var 변수에서 가시적으로 드러납니다.

이러한 호이스팅은 유연한 코드를 짤 수 있게 해주지만, 로직 흐름을 방해하고 코드를 읽는 데에 불편함을 주는 문제가 있습니다.